---
title: 'Courses & Coaching Attribution - Track High-Ticket Sales'
sidebarTitle: 'Courses & Coaching'
description: 'Integrate TrackSource for info products, courses, and coaching businesses. Track leads from GHL, ClickFunnels, Typeform, Calendly to Whop or Stripe.'
icon: 'graduation-cap'
og:title: 'Course & Coaching Marketing Attribution | TrackSource'
og:description: 'Know which ads drive your course sales. Track the full funnel from ad click to high-ticket purchase.'
---

# Courses & Coaching Integration Guide

Track the complete high-ticket sales funnel from ad click through landing page, lead form, booking call, to purchase.

## Typical Course/Coaching Stack

```
Facebook Ad  →  Landing Page  →  Lead Form  →  Calendly  →  Sales Call  →  Purchase
               (GHL/CF)         (Typeform)    (Booking)    (Manual)       (Whop/Stripe)
```

**Common Technologies**:
- **Landing Pages**: GoHighLevel (GHL), ClickFunnels, Webflow, Unbounce
- **Forms**: Typeform, Tally, GHL forms, JotForm
- **Booking**: Calendly, Cal.com, GHL calendar
- **Payments**: Whop, Stripe, Gumroad, Teachable

## The Challenge: Iframes and UTM Loss

A common problem with this stack:

<Warning>
  **Forms embedded as iframes (like Typeform in GHL) cannot read the parent page's URL parameters.**

  This means UTMs and click IDs from your ads are lost when the form submits.
</Warning>

**Solution**: TrackSource captures attribution on the landing page, then links it via `ts_anonymous_id` when the form submits.

## Integration Overview

<Steps>
  <Step title="Install SDK on Landing Page">
    Capture UTMs, fbclid, and referrer when visitor arrives
  </Step>
  <Step title="Pass Anonymous ID to Form">
    Bridge the iframe gap by passing TrackSource ID
  </Step>
  <Step title="Configure Form Webhook">
    Send leads to TrackSource
  </Step>
  <Step title="Connect Calendly (Optional)">
    Track booked calls
  </Step>
  <Step title="Connect Payment Webhook">
    Attribute revenue to ad campaigns
  </Step>
</Steps>

## Step 1: Landing Page Setup

### GoHighLevel (GHL)

Add to your GHL page's custom code section:

```html
<!-- TrackSource SDK -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'ts.start':
  new Date().getTime(),event:'ts.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='tsLayer'?'&l='+l:'';j.async=true;j.src=
  'https://cdn.tracksource.io/ts.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','tsLayer','YOUR_TENANT_ID');
</script>
```

### ClickFunnels

1. Go to your funnel settings
2. Add tracking code to **Header Code**:

```html
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'ts.start':
  new Date().getTime(),event:'ts.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='tsLayer'?'&l='+l:'';j.async=true;j.src=
  'https://cdn.tracksource.io/ts.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','tsLayer','YOUR_TENANT_ID');
</script>
```

### Webflow / Unbounce

Add to site-wide custom code or page settings header.

## Step 2: Pass Anonymous ID to Embedded Forms

This is the critical step that solves the iframe problem.

### Typeform Embedded in GHL

**Where to paste this code in GoHighLevel:**
1. Go to your GHL page editor
2. Click **Settings** (gear icon) → **Custom Code**
3. In the **Body Tracking Code** section, paste this code **after** the TrackSource SDK script

```html
<!-- Add after TrackSource SDK -->
<script>
  // Wait for TrackSource to initialize
  function updateTypeformWithTrackSource() {
    // Get TrackSource anonymous ID
    const tsLayer = window.tsLayer || [];
    const entry = tsLayer.find(e => e.anonymous_id);
    const tsId = entry ? entry.anonymous_id : '';

    if (!tsId) {
      // Retry if not ready yet
      setTimeout(updateTypeformWithTrackSource, 500);
      return;
    }

    // Find all Typeform iframes and update their src
    document.querySelectorAll('iframe[src*="typeform.com"]').forEach(iframe => {
      const url = new URL(iframe.src);
      url.searchParams.set('ts_anonymous_id', tsId);

      // Also pass through any UTM params from current URL
      const currentParams = new URLSearchParams(window.location.search);
      ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term', 'fbclid', 'gclid'].forEach(param => {
        if (currentParams.has(param)) {
          url.searchParams.set(param, currentParams.get(param));
        }
      });

      iframe.src = url.toString();
    });
  }

  // Run after page loads
  window.addEventListener('load', () => {
    setTimeout(updateTypeformWithTrackSource, 1000);
  });
</script>
```

### Tally Embedded in GHL

```html
<script>
  function updateTallyWithTrackSource() {
    const tsLayer = window.tsLayer || [];
    const entry = tsLayer.find(e => e.anonymous_id);
    const tsId = entry ? entry.anonymous_id : '';

    if (!tsId) {
      setTimeout(updateTallyWithTrackSource, 500);
      return;
    }

    // Find Tally iframes
    document.querySelectorAll('iframe[src*="tally.so"]').forEach(iframe => {
      const url = new URL(iframe.src);
      url.searchParams.set('ts_anonymous_id', tsId);
      iframe.src = url.toString();
    });
  }

  window.addEventListener('load', () => {
    setTimeout(updateTallyWithTrackSource, 1000);
  });
</script>
```

### GHL Native Forms

For native GHL forms, add a hidden field:

1. Add a hidden field named `ts_anonymous_id`
2. Add this script to auto-populate it:

```html
<script>
  function populateGHLHiddenField() {
    const tsLayer = window.tsLayer || [];
    const entry = tsLayer.find(e => e.anonymous_id);

    if (entry) {
      const hiddenField = document.querySelector('input[name="ts_anonymous_id"]');
      if (hiddenField) {
        hiddenField.value = entry.anonymous_id;
      }
    } else {
      setTimeout(populateGHLHiddenField, 500);
    }
  }

  window.addEventListener('load', populateGHLHiddenField);
</script>
```

## Step 3: Configure Form Webhooks

### Typeform

1. Go to **Connect** → **Webhooks**
2. Add webhook URL:
   ```
   https://events.tracksource.io/webhooks/typeform/YOUR_TENANT_ID
   ```
3. Add hidden field `ts_anonymous_id` in your form

### Tally

1. Go to **Integrations** → **Webhooks**
2. Add webhook URL:
   ```
   https://events.tracksource.io/webhooks/tally/YOUR_TENANT_ID
   ```
3. Add hidden field `ts_anonymous_id` in your form

### GoHighLevel Forms

1. Go to **Automation** → **Workflows**
2. Create workflow with trigger: **Form Submitted**
3. Add action: **Webhook**
4. Configure:
   - URL: `https://events.tracksource.io/webhooks/gohighlevel/YOUR_TENANT_ID`
   - Method: POST
5. Map fields: email, name, phone, ts_anonymous_id

### JotForm

1. Go to **Settings** → **Integrations**
2. Search for **Webhooks**
3. Add webhook URL:
   ```
   https://events.tracksource.io/webhooks/jotform/YOUR_TENANT_ID
   ```

## Step 4: Connect Calendly

Track when leads book calls:

1. Go to [calendly.com](https://calendly.com) → **Integrations** → **Webhooks**
2. Create webhook:
   - URL: `https://events.tracksource.io/webhooks/calendly/YOUR_TENANT_ID`
   - Events: `invitee.created`

### Pass Attribution to Calendly

When linking to Calendly, include UTMs:

```html
<script>
  function getCalendlyUrl() {
    const baseUrl = 'https://calendly.com/your-name/30min';
    const params = new URLSearchParams(window.location.search);
    const tsId = (window.tsLayer?.find(e => e.anonymous_id) || {}).anonymous_id || '';

    const calendlyParams = new URLSearchParams();

    // Pass UTMs
    ['utm_source', 'utm_medium', 'utm_campaign'].forEach(param => {
      if (params.has(param)) {
        calendlyParams.set(param, params.get(param));
      }
    });

    // Pass TrackSource ID (as custom answer if you have custom questions)
    if (tsId) {
      calendlyParams.set('a1', tsId); // a1 = first custom question
    }

    return `${baseUrl}?${calendlyParams.toString()}`;
  }

  // Update Calendly links
  document.querySelectorAll('a[href*="calendly.com"]').forEach(link => {
    link.href = getCalendlyUrl();
  });
</script>
```

## Step 5: Connect Payment Provider

### Whop

1. Go to **Settings** → **Developer** → **Webhooks**
2. Create webhook:
   - URL: `https://events.tracksource.io/webhooks/whop/YOUR_TENANT_ID`
   - Events: `membership.went_valid`, `payment.succeeded`

### Stripe

1. Go to **Developers** → **Webhooks**
2. Add endpoint:
   - URL: `https://events.tracksource.io/webhooks/stripe/YOUR_TENANT_ID`
   - Events: `checkout.session.completed`, `payment_intent.succeeded`

### Passing Anonymous ID Through Checkout

For Stripe Checkout:

```javascript
// When creating checkout, include ts_anonymous_id in metadata
const session = await stripe.checkout.sessions.create({
  // ... other options
  metadata: {
    ts_anonymous_id: req.body.ts_anonymous_id
  }
});
```

For Whop, pass it in the checkout URL:
```
https://whop.com/checkout/your-product/?ts_anonymous_id=xxx
```

## Complete GHL + Typeform Example

Here's the complete code to add to your GHL page:

```html
<!-- TRACKSOURCE INTEGRATION - Add to GHL Custom Code -->

<!-- 1. TrackSource SDK -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'ts.start':
  new Date().getTime(),event:'ts.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='tsLayer'?'&l='+l:'';j.async=true;j.src=
  'https://cdn.tracksource.io/ts.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','tsLayer','YOUR_TENANT_ID');
</script>

<!-- 2. Pass TrackSource ID to Typeform iframe -->
<script>
  (function() {
    let attempts = 0;
    const maxAttempts = 20;

    function updateForms() {
      attempts++;

      // Get TrackSource anonymous ID
      const tsLayer = window.tsLayer || [];
      const entry = tsLayer.find(e => e.anonymous_id);

      if (!entry && attempts < maxAttempts) {
        setTimeout(updateForms, 500);
        return;
      }

      const tsId = entry ? entry.anonymous_id : '';
      const urlParams = new URLSearchParams(window.location.search);

      // Update Typeform iframes
      document.querySelectorAll('iframe[src*="typeform.com"]').forEach(iframe => {
        try {
          const url = new URL(iframe.src);

          // Add TrackSource ID
          if (tsId) url.searchParams.set('ts_anonymous_id', tsId);

          // Pass through UTM parameters
          ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term'].forEach(param => {
            if (urlParams.has(param)) {
              url.searchParams.set(param, urlParams.get(param));
            }
          });

          // Pass through click IDs
          ['fbclid', 'gclid', 'ttclid'].forEach(param => {
            if (urlParams.has(param)) {
              url.searchParams.set(param, urlParams.get(param));
            }
          });

          iframe.src = url.toString();
        } catch (e) {
          console.error('TrackSource: Error updating iframe', e);
        }
      });

      // Also update Tally iframes
      document.querySelectorAll('iframe[src*="tally.so"]').forEach(iframe => {
        try {
          const url = new URL(iframe.src);
          if (tsId) url.searchParams.set('ts_anonymous_id', tsId);
          iframe.src = url.toString();
        } catch (e) {
          console.error('TrackSource: Error updating Tally iframe', e);
        }
      });

      // Update Calendly links
      document.querySelectorAll('a[href*="calendly.com"]').forEach(link => {
        try {
          const url = new URL(link.href);
          ['utm_source', 'utm_medium', 'utm_campaign'].forEach(param => {
            if (urlParams.has(param)) {
              url.searchParams.set(param, urlParams.get(param));
            }
          });
          link.href = url.toString();
        } catch (e) {}
      });
    }

    // Run after page loads
    if (document.readyState === 'complete') {
      setTimeout(updateForms, 1000);
    } else {
      window.addEventListener('load', () => setTimeout(updateForms, 1000));
    }
  })();
</script>
```

## Funnel Metrics

### What You'll Track

| Stage | Event | Metrics |
|-------|-------|---------|
| Visit | `page_view` | Visitors by source |
| Lead | `lead` (form submit) | Leads by source, Cost per lead |
| Call Booked | `meeting_booked` | Show rate by source |
| Purchase | `conversion` | Revenue, ROAS by source |

### Example Attribution Report

```
Facebook Campaign: "Free Training"
─────────────────────────────────────────────────
Spend:          $5,000
Visitors:       2,500
Leads:          250 (10% opt-in rate)
Calls Booked:   50 (20% of leads)
Calls Shown:    40 (80% show rate)
Sales:          8 (20% close rate)
Revenue:        $39,760 ($4,970 avg ticket)
─────────────────────────────────────────────────
Cost per Lead:  $20
Cost per Sale:  $625
ROAS:           7.95x
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Form submissions not linked to source">
    1. Verify TrackSource script loads BEFORE the form iframe
    2. Check that `ts_anonymous_id` is being passed to the form
    3. Add a hidden field in your form for `ts_anonymous_id`
    4. Check browser console for errors
  </Accordion>

  <Accordion title="UTMs not captured">
    1. Ensure UTMs are in your ad URLs
    2. Check landing page URL has the parameters
    3. Verify the script that passes UTMs to iframe is running
  </Accordion>

  <Accordion title="Calendly bookings not attributed">
    1. Verify webhook is configured in Calendly
    2. Ensure UTMs are passed in Calendly URL
    3. Check Calendly webhook logs for delivery errors
  </Accordion>

  <Accordion title="Purchases not linked to leads">
    1. Verify customer email matches lead email
    2. Pass `ts_anonymous_id` through checkout if possible
    3. Allow 24 hours for attribution to process
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Typeform Setup" icon="t" href="/webhooks/typeform">
    Detailed Typeform integration guide
  </Card>
  <Card title="Whop Integration" icon="cart-shopping" href="/payments/whop">
    Connect Whop for payment tracking
  </Card>
</CardGroup>
