---
title: Query Events
api: GET /v1/events/recent
description: 'Retrieve recent events for your tenant'
---

## Get Recent Events

Retrieve the most recent events for your tenant.

### Request

```bash
curl -X GET "https://events.tracksource.io/v1/events/recent?limit=100" \
  -H "X-Tenant-ID: your_tenant_id"
```

### Parameters

<ParamField query="limit" type="number" default="100">
  Number of events to return (max 1000)
</ParamField>

### Response

```json
{
  "events": [
    {
      "id": "evt_abc123",
      "tenant_id": "your_tenant_id",
      "event_type": "purchase",
      "user_id": "user_123",
      "session_id": "sess_xyz",
      "anonymous_id": "anon_abc",
      "timestamp": "2024-01-15T10:30:00Z",
      "properties": {
        "email": "customer@example.com",
        "revenue": 99.00,
        "currency": "USD"
      },
      "context": {
        "page": {"url": "https://example.com/checkout"},
        "campaign": {"source": "facebook"}
      },
      "source": "web",
      "ip_address": "192.168.1.1",
      "user_agent": "Mozilla/5.0...",
      "created_at": "2024-01-15T10:30:00.123Z"
    }
  ],
  "count": 1
}
```

## Get Event Statistics

Get aggregated statistics about your events.

### Request

```bash
curl -X GET "https://events.tracksource.io/v1/events/stats" \
  -H "X-Tenant-ID: your_tenant_id"
```

### Response

```json
{
  "total_events": 125000,
  "events_last_hour": 342,
  "events_by_type": [
    {"event_type": "page_view", "count": 85000},
    {"event_type": "button_click", "count": 25000},
    {"event_type": "signup", "count": 8500},
    {"event_type": "purchase", "count": 6500}
  ]
}
```

## Real-Time Events (WebSocket)

For real-time event streaming, use the WebSocket API:

```javascript
const ws = new WebSocket('wss://events.tracksource.io/ws?tenant_id=YOUR_TENANT_ID');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);

  if (data.type === 'event') {
    console.log('New event:', data.data);
  }
};

// Subscribe to specific event types
ws.send(JSON.stringify({
  type: 'subscribe',
  event_types: ['purchase', 'lead']
}));

// Ping to keep connection alive
setInterval(() => {
  ws.send(JSON.stringify({ type: 'ping' }));
}, 30000);
```

### WebSocket Messages

| Type | Description |
|------|-------------|
| `connected` | Connection established |
| `event` | New event received |
| `pong` | Response to ping |

### Event Message Format

```json
{
  "type": "event",
  "data": {
    "id": "evt_abc123",
    "event_type": "purchase",
    "properties": {...},
    "timestamp": "2024-01-15T10:30:00Z"
  },
  "timestamp": "2024-01-15T10:30:00.123Z"
}
```
